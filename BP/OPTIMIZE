SUBROUTINE OPTIMIZE( MYDATA )
    EQU FALSE TO 0
    EQU TRUE TO 1

    MYDATA.LENGTH = MYDATA<1>
    MYDATA.MODIFIED = RAISE( MYDATA<2> )
    MYDATA.DATA = RAISE( MYDATA<3> )
    STARTPOS = 1
    LOOP
    WHILE (STARTPOS <= MYDATA.LENGTH)
        LOOP
        WHILE ((STARTPOS <= MYDATA.LENGTH) & NOT(MYDATA.MODIFIED<STARTPOS>))
            STARTPOS += 1
        REPEAT
        ENDPOS = STARTPOS
        LOOP
        WHILE ((ENDPOS <= MYDATA.LENGTH) & (MYDATA.MODIFIED<ENDPOS>))
            ENDPOS += 1
        REPEAT
        IF ((ENDPOS <= MYDATA.LENGTH) & (MYDATA.DATA<STARTPOS> = MYDATA.DATA<ENDPOS>)) THEN
            MYDATA.MODIFIED<STARTPOS> = FALSE
            MYDATA.MODIFIED<ENDPOS> = TRUE
        END ELSE
            STARTPOS = ENDPOS
        END
    REPEAT

    MYDATA<2> = LOWER( MYDATA.MODIFIED )
    MYDATA<3> = LOWER( MYDATA.DATA )
    
    RETURN

END ;* OPTIMIZE
